# éƒ¨ç½²çŠ¶æ€å’Œä¸‹ä¸€æ­¥æ“ä½œ

## âœ… å·²å®Œæˆçš„å·¥ä½œ

1. **kubectl å·²å®‰è£…** âœ…
   - ç‰ˆæœ¬ï¼š1.34.1
   - æ³¨æ„ï¼šéœ€è¦é‡å¯ PowerShell æˆ–é‡æ–°æ‰“å¼€ç»ˆç«¯æ‰èƒ½ä½¿ç”¨

2. **éƒ¨ç½²é…ç½®æ–‡ä»¶å·²å‡†å¤‡** âœ…
   - `ack-deployment.yaml` - Kubernetes éƒ¨ç½²é…ç½®
   - é•œåƒåœ°å€ï¼š`registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest`

3. **è‡ªåŠ¨åŒ–è„šæœ¬å·²åˆ›å»º** âœ…
   - `deploy-and-get-url.ps1` - è‡ªåŠ¨éƒ¨ç½²å¹¶è·å–è®¿é—®åœ°å€

## ğŸš€ è·å–è®¿é—®åœ°å€çš„æ­¥éª¤

### å‰ç½®æ¡ä»¶æ£€æŸ¥

åœ¨å¼€å§‹éƒ¨ç½²å‰ï¼Œè¯·ç¡®è®¤ï¼š

1. **ACR é•œåƒå·²æ„å»º**
   - ç™»å½•ï¼šhttps://cr.console.aliyun.com
   - æ£€æŸ¥å‘½åç©ºé—´ `algorithm-games` ä¸‹çš„é•œåƒ `algorithm-games:latest`
   - å¦‚æœæœªæ„å»ºï¼Œè¯·é…ç½®æ„å»ºè§„åˆ™å¹¶è§¦å‘æ„å»º

2. **ACK é›†ç¾¤å·²åˆ›å»º**
   - ç™»å½•ï¼šhttps://cs.console.aliyun.com
   - ç¡®è®¤æœ‰å¯ç”¨çš„ ACK é›†ç¾¤

3. **kubeconfig å·²é…ç½®**
   - åœ¨ ACK æ§åˆ¶å°è·å–é›†ç¾¤çš„ kubeconfig
   - ä¿å­˜ä¸º `kubeconfig.yaml`

### å¿«é€Ÿéƒ¨ç½²ï¼ˆ3 æ­¥ï¼‰

#### æ­¥éª¤ 1: é‡å¯ PowerShell æˆ–æ‰“å¼€æ–°ç»ˆç«¯

kubectl éœ€è¦åœ¨æ–°ç»ˆç«¯ä¸­ä½¿ç”¨ã€‚

#### æ­¥éª¤ 2: é…ç½® kubeconfig

```powershell
# è®¾ç½® kubeconfigï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„ï¼‰
$env:KUBECONFIG = "C:\Users\think\Documents\GitHub\dfs-mazesolver\kubeconfig.yaml"

# æµ‹è¯•è¿æ¥
kubectl get nodes
```

#### æ­¥éª¤ 3: è¿è¡Œéƒ¨ç½²è„šæœ¬

```powershell
cd C:\Users\think\Documents\GitHub\dfs-mazesolver
.\deploy-and-get-url.ps1
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- åº”ç”¨éƒ¨ç½²é…ç½®
- ç­‰å¾… Pod å¯åŠ¨
- è·å–å¹¶æ˜¾ç¤ºå¤–éƒ¨è®¿é—®åœ°å€

### æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¦‚æœè„šæœ¬å¤±è´¥ï¼‰

```powershell
# 1. åº”ç”¨éƒ¨ç½²é…ç½®
kubectl apply -f ack-deployment.yaml

# 2. ç­‰å¾… Pod å¯åŠ¨ï¼ˆçº¦ 30 ç§’ï¼‰
Start-Sleep -Seconds 30

# 3. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
kubectl get svc algorithm-games-service -n default

# 4. è·å–å¤–éƒ¨ IP
$svc = kubectl get svc algorithm-games-service -n default -o json | ConvertFrom-Json
$externalIP = $svc.status.loadBalancer.ingress[0].ip
if (-not $externalIP) {
    $externalIP = $svc.status.loadBalancer.ingress[0].hostname
}
Write-Host "è®¿é—®åœ°å€: http://$externalIP"
```

## ğŸŒ è®¿é—®åœ°å€æ ¼å¼

éƒ¨ç½²æˆåŠŸåï¼Œè®¿é—®åœ°å€ä¸ºï¼š
```
http://ä½ çš„å¤–éƒ¨IP
```

å¤–éƒ¨ IP ä¼šåœ¨ LoadBalancer åˆ†é…åæ˜¾ç¤ºï¼ˆé€šå¸¸éœ€è¦ 1-2 åˆ†é’Ÿï¼‰ã€‚

## ğŸ“‹ å¦‚æœè¿˜æ²¡æœ‰ ACK é›†ç¾¤

### åˆ›å»º ACK é›†ç¾¤

1. ç™»å½•ï¼šhttps://cs.console.aliyun.com
2. ç‚¹å‡» **åˆ›å»ºé›†ç¾¤**
3. é€‰æ‹© **æ ‡å‡†æ‰˜ç®¡é›†ç¾¤**
4. é…ç½®åŸºæœ¬ä¿¡æ¯ï¼š
   - é›†ç¾¤åç§°ï¼š`algorithm-games-cluster`
   - åœ°åŸŸï¼š`åä¸œ1ï¼ˆæ­å·ï¼‰`
   - Kubernetes ç‰ˆæœ¬ï¼šæœ€æ–°ç¨³å®šç‰ˆ
5. é…ç½®èŠ‚ç‚¹ï¼ˆæµ‹è¯•ç”¨æœ€å°é…ç½®å³å¯ï¼‰
6. ç‚¹å‡» **åˆ›å»ºé›†ç¾¤**
7. ç­‰å¾…åˆ›å»ºå®Œæˆï¼ˆçº¦ 5-10 åˆ†é’Ÿï¼‰
8. è·å– kubeconfigï¼ˆåœ¨é›†ç¾¤è¯¦æƒ…é¡µé¢çš„"è¿æ¥ä¿¡æ¯"ï¼‰

### æˆ–è€…ä½¿ç”¨æ§åˆ¶å°ç›´æ¥éƒ¨ç½²

å¦‚æœä¸æƒ³ä½¿ç”¨ kubectlï¼š

1. ç™»å½•ï¼šhttps://cs.console.aliyun.com
2. é€‰æ‹©é›†ç¾¤ â†’ **å·¥ä½œè´Ÿè½½** â†’ **æ— çŠ¶æ€** â†’ **ä½¿ç”¨é•œåƒåˆ›å»º**
3. é…ç½®ï¼š
   - åº”ç”¨åç§°ï¼š`algorithm-games`
   - é•œåƒï¼š`registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest`
   - ç«¯å£ï¼š`8000`
   - ç¯å¢ƒå˜é‡ï¼š`ALLOWED_ORIGINS=*`
4. ç‚¹å‡» **åˆ›å»º**
5. åœ¨ **æœåŠ¡** é¡µé¢æŸ¥çœ‹å¤–éƒ¨è®¿é—®åœ°å€

## ğŸ” æ£€æŸ¥éƒ¨ç½²çŠ¶æ€

```powershell
# æŸ¥çœ‹ Pod çŠ¶æ€
kubectl get pods -n default -l app=algorithm-games

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
kubectl get svc algorithm-games-service -n default

# æŸ¥çœ‹ Pod æ—¥å¿—
kubectl logs -n default -l app=algorithm-games

# æŸ¥çœ‹äº‹ä»¶
kubectl get events -n default --sort-by='.lastTimestamp'
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. kubectl ç‰ˆæœ¬ï¼š`kubectl version --client`
2. é›†ç¾¤è¿æ¥çŠ¶æ€ï¼š`kubectl get nodes`
3. Pod çŠ¶æ€ï¼š`kubectl get pods -n default`
4. æœåŠ¡çŠ¶æ€ï¼š`kubectl get svc -n default`

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `è·å–è®¿é—®åœ°å€.md` - è¯¦ç»†éƒ¨ç½²æ­¥éª¤
- `å®Œæ•´éƒ¨ç½²æŒ‡å—.md` - å®Œæ•´æŒ‡å—
- `README_éƒ¨ç½².md` - å¿«é€Ÿå‚è€ƒ

---

**é‡è¦æç¤ºï¼š** è¯·åœ¨æ–°æ‰“å¼€çš„ PowerShell ç»ˆç«¯ä¸­è¿è¡Œ kubectl å‘½ä»¤ï¼Œå› ä¸ºç¯å¢ƒå˜é‡éœ€è¦é‡æ–°åŠ è½½ã€‚


