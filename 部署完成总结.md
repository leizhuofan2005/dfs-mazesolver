# é˜¿é‡Œäº‘ ACK éƒ¨ç½²å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„é…ç½®

1. **Kubernetes éƒ¨ç½²é…ç½®æ–‡ä»¶**
   - `ack-deployment.yaml` - åŸºç¡€éƒ¨ç½²é…ç½®
   - `ack-deployment-final.yaml` - æœ€ç»ˆéƒ¨ç½²é…ç½®ï¼ˆé•œåƒåœ°å€å·²æ›´æ–°ï¼‰

2. **éƒ¨ç½²è„šæœ¬**
   - `auto-deploy-simple.ps1` - ç®€åŒ–éƒ¨ç½²è„šæœ¬
   - `deploy-to-aliyun.ps1` - å®Œæ•´éƒ¨ç½²è„šæœ¬

3. **éƒ¨ç½²æ–‡æ¡£**
   - `é˜¿é‡Œäº‘ACKéƒ¨ç½²æŒ‡å—.md` - å®Œæ•´éƒ¨ç½²æŒ‡å—
   - `é˜¿é‡Œäº‘MCPéƒ¨ç½²å¿«é€Ÿå¼€å§‹.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ ACR æ„å»ºæœåŠ¡ï¼ˆæ¨èï¼Œæ— éœ€æœ¬åœ° Dockerï¼‰

#### æ­¥éª¤ 1: åœ¨ ACR ä¸­åˆ›å»ºå‘½åç©ºé—´å’Œé•œåƒä»“åº“

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼šhttps://cr.console.aliyun.com
2. åˆ›å»ºå‘½åç©ºé—´ï¼š`algorithm-games`
3. åˆ›å»ºé•œåƒä»“åº“ï¼š
   - ä»“åº“åç§°ï¼š`algorithm-games`
   - ä»“åº“ç±»å‹ï¼šç§æœ‰
   - ä»£ç æºï¼šé€‰æ‹© GitHub ä»“åº“æˆ–ä¸Šä¼ ä»£ç 

#### æ­¥éª¤ 2: é…ç½®æ„å»ºè§„åˆ™

1. è¿›å…¥é•œåƒä»“åº“é¡µé¢
2. ç‚¹å‡» **æ„å»º** æ ‡ç­¾
3. åˆ›å»ºæ„å»ºè§„åˆ™ï¼š
   - **Dockerfile è·¯å¾„**ï¼š`./Dockerfile`
   - **æ„å»ºä¸Šä¸‹æ–‡**ï¼š`/`
   - **æ„å»ºåˆ†æ”¯**ï¼š`main` æˆ– `master`
   - **æ„å»ºç‰ˆæœ¬è§„åˆ™**ï¼š`latest`

#### æ­¥éª¤ 3: è§¦å‘æ„å»º

1. åœ¨æ„å»ºè§„åˆ™é¡µé¢ï¼Œç‚¹å‡» **ç«‹å³æ„å»º**
2. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦ 5-10 åˆ†é’Ÿï¼‰
3. æ„å»ºå®Œæˆåï¼Œé•œåƒåœ°å€ä¸ºï¼š`registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest`

#### æ­¥éª¤ 4: éƒ¨ç½²åˆ° ACK

**æ–¹å¼ A - ä½¿ç”¨æ§åˆ¶å°ï¼ˆæ¨èï¼‰:**

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼šhttps://cs.console.aliyun.com
2. é€‰æ‹©ä½ çš„ ACK é›†ç¾¤
3. ç‚¹å‡» **å·¥ä½œè´Ÿè½½** â†’ **æ— çŠ¶æ€** â†’ **ä½¿ç”¨é•œåƒåˆ›å»º**
4. é…ç½®åº”ç”¨ï¼š
   - **åº”ç”¨åç§°**ï¼š`algorithm-games`
   - **é•œåƒ**ï¼š`registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest`
   - **ç«¯å£**ï¼š`8000`
   - **ç¯å¢ƒå˜é‡**ï¼š
     - `ALLOWED_ORIGINS=*`
     - `PORT=8000`
5. ç‚¹å‡» **åˆ›å»º**

**æ–¹å¼ B - ä½¿ç”¨ kubectl:**

```powershell
# é…ç½® kubectlï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
# åœ¨ ACK æ§åˆ¶å°è·å– kubeconfig

# åº”ç”¨éƒ¨ç½²é…ç½®
kubectl apply -f ack-deployment-final.yaml

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods -n default
kubectl get svc -n default

# æŸ¥çœ‹æœåŠ¡å¤–éƒ¨ IP
kubectl get svc algorithm-games-service -n default -o wide
```

### æ–¹æ¡ˆ 2: æœ¬åœ°æ„å»ºå¹¶æ¨é€ï¼ˆéœ€è¦ Dockerï¼‰

å¦‚æœä½ å®‰è£…äº† Docker Desktopï¼š

```powershell
# ç™»å½• ACR
docker login --username=ä½ çš„AccessKeyId --password-stdin registry.cn-hangzhou.aliyuncs.com
# è¾“å…¥ AccessKey Secret

# æ„å»ºé•œåƒ
docker build -t algorithm-games .

# æ‰“æ ‡ç­¾
docker tag algorithm-games registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest

# æ¨é€é•œåƒ
docker push registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest
```

ç„¶åæŒ‰ç…§æ–¹æ¡ˆ 1 çš„æ­¥éª¤ 4 éƒ¨ç½²åˆ° ACKã€‚

## ğŸ“‹ é…ç½®ä¿¡æ¯

- **å‘½åç©ºé—´**ï¼š`algorithm-games`
- **é•œåƒåœ°å€**ï¼š`registry.cn-hangzhou.aliyuncs.com/algorithm-games/algorithm-games:latest`
- **æœåŠ¡ç«¯å£**ï¼š`8000`
- **ç¯å¢ƒå˜é‡**ï¼š`ALLOWED_ORIGINS=*`, `PORT=8000`

## ğŸ” éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼š

1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š
   ```powershell
   kubectl get svc algorithm-games-service -n default
   ```

2. è·å–å¤–éƒ¨è®¿é—®åœ°å€ï¼ˆLoadBalancer ç±»å‹ä¼šåˆ†é…å¤–éƒ¨ IPï¼‰

3. è®¿é—®åº”ç”¨ï¼š`http://ä½ çš„æœåŠ¡åœ°å€`

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é•œåƒæ‹‰å–å¤±è´¥

- æ£€æŸ¥ ACR ç™»å½•çŠ¶æ€
- ç¡®è®¤å‘½åç©ºé—´å’Œä»“åº“åç§°æ­£ç¡®
- ç¡®è®¤é•œåƒå·²æˆåŠŸæ„å»ºå’Œæ¨é€

### Pod å¯åŠ¨å¤±è´¥

```powershell
# æŸ¥çœ‹ Pod æ—¥å¿—
kubectl logs -n default -l app=algorithm-games

# æŸ¥çœ‹ Pod è¯¦ç»†ä¿¡æ¯
kubectl describe pod -n default -l app=algorithm-games
```

### æœåŠ¡æ— æ³•è®¿é—®

```powershell
# æ£€æŸ¥æœåŠ¡é…ç½®
kubectl get svc algorithm-games-service -n default -o yaml

# æ£€æŸ¥ç«¯å£æ˜ å°„
kubectl get endpoints algorithm-games-service -n default
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. é”™è¯¯ä¿¡æ¯
2. Pod æ—¥å¿—
3. æœåŠ¡çŠ¶æ€

---

**éƒ¨ç½²é…ç½®æ–‡ä»¶ä½ç½®**ï¼š`ack-deployment-final.yaml`


